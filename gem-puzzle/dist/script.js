(()=>{"use strict";var e={751:(e,t,o)=>{var n,r=o(350);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,o){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,o){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(n){var r=Object.getOwnPropertyDescriptor(n,t);return r.get?r.get.call(o):r.value}})(e,t,o||e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d,m,f=0,p=0;(new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(y,e);var t,o,r,a,h=(r=y,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=u(r);if(a){var o=u(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return c(this,e)});function y(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,y),(e=h.call(this)).targetDragBlock,e}return t=y,(o=[{key:"audioHandler",value:function(){if(this.isVolume){var e=document.querySelector("#click-sound");e.currentTime=0,e.play()}}},{key:"dragStart",value:function(e){this.targetDragBlock=e.target;var t=e.target.closest("[data-num]");if(t!==document.querySelector('[data-num="'.concat(this.rows*this.columns,'"]'))){var o=document.querySelector(".field"),n=Array.from(o.childNodes).indexOf(e.target);d=this.blocksCoord[n],m=e.target.closest("[data-num]"),e.dataTransfer.setData("block",e.target.id),t.classList.add("invisible"),e.dataTransfer.setData("block",t)}}},{key:"dragFinish",value:function(e){e.target.closest("[data-num]").classList.remove("invisible")}},{key:"moveHandler",value:function(e,t){var o=this,n=document.querySelector(".move-count"),r=document.querySelector('[data-num="'.concat(this.rows*this.columns,'"]')),a=e.target.closest("[data-num]");if(null!==a){this.audioHandler();var i=this.blocksCoord[t],s=Math.abs(parseFloat(this.empty.left)-parseFloat(a.style.left)),l=Math.abs(parseFloat(this.empty.top)-parseFloat(a.style.top));if(!(l+s>this.blockSize)){l+s==this.blockSize&&(n.textContent=++n.textContent);var c=r.style.left,u=r.style.top,d=this.blocksCoord[this.emptyBlock];r.style.left=i.elem.style.left,r.style.top=i.elem.style.top,i.elem.style.top=u,i.elem.style.left=c,i.left=parseFloat(c)/this.blockSize,i.top=parseFloat(u)/this.blockSize,this.empty.left=r.style.left,this.empty.top=r.style.top,d.top=parseFloat(this.empty.top)/this.blockSize,d.left=parseFloat(this.empty.left)/this.blockSize,this.blocksCoord.every((function(e){return e.value==e.top*o.rows+e.left}))&&this.winHandler()}}}},{key:"dragDrop",value:function(e,t,o){var n=this,r=document.querySelector(".move-count"),a=e.target,i=this.blocksCoord[t],s=this.blocksCoord[o],l=i.elem.style.left,c=i.elem.style.top;this.audioHandler();var u=Math.abs(parseFloat(this.empty.left)-parseFloat(m.style.left)),f=Math.abs(parseFloat(this.empty.top)-parseFloat(m.style.top));if(!(f+u>this.blockSize)){a.style.top=d.elem.style.top,a.style.left=d.elem.style.left,d.elem.style.top=c,d.elem.style.left=l;var p=document.querySelector('[data-num="'.concat(this.rows*this.columns,'"]'));s.left=parseFloat(l)/this.blockSize,s.top=parseFloat(c)/this.blockSize,this.empty.left=p.style.left,this.empty.top=p.style.top;var h=this.blocksCoord.every((function(e){return e.value==e.top*n.rows+e.left}));f+u==this.blockSize&&(r.textContent=++r.textContent),h&&this.winHandler()}}},{key:"blocksListenerHandler",value:function(){var e=this,t=document.querySelector(".field");t.addEventListener("dragstart",(function(t){e.dragStart(t)})),t.addEventListener("click",(function(o){var n=Array.from(t.childNodes).indexOf(o.target);e.moveHandler(o,n)})),t.addEventListener("dragend",this.dragFinish),t.addEventListener("drop",(function(o){var n=Array.from(t.childNodes).indexOf(o.target),r=Array.from(t.childNodes).indexOf(e.targetDragBlock);e.dragDrop(o,n,r)}))}},{key:"swapBlocks",value:function(e,t){var o=this.numbers[e];this.numbers[e]=this.numbers[t],this.numbers[t]=o}},{key:"checkSolvability",value:function(e){for(var t=0,o=1,n=e.length-1;o<n;o++)for(var r=o-1;r>=0;r--)e[r]>e[o]&&t++;return!(t%2)}},{key:"pauseHandler",value:function(){clearInterval(n)}},{key:"saveGameHandler",value:function(){var e=this,t=document.querySelector(".move-count"),o={board:{}};this.blocksCoord.forEach((function(t){var n=t.top*e.rows+t.left;o.board["".concat(n)]=t.value})),o.min=f,o.sec=p,o.moves=t.textContent,o.block=this.blockSize,o.rows=this.rows,o.columns=this.columns;var n=[];n.push(o),localStorage.setItem("saveField",JSON.stringify(n))}},{key:"loadGame",value:function(){document.body.querySelector(".field").remove(),document.body.querySelector(".header").remove(),document.body.querySelector(".leader-wrap").remove();var e=new y,t=JSON.parse(localStorage.getItem("saveField"));e.numbers=Object.values(t[0].board).map((function(e){return e+1})),e.rows=t[0].rows,e.columns=t[0].columns,e.blockSize=t[0].block,e.getBlocks(),e.isSolved();var o=document.querySelector(".field"),n=document.querySelector(".move-count"),r=document.querySelector(".pause-button");n.textContent=t[0].moves,f=t[0].min,p=t[0].sec,this.addTimer(),o.querySelector(".overlay").remove(),r.removeAttribute("disabled")}},{key:"resumeTimer",value:function(){var e=document.querySelector(".stop-watch");n=setInterval((function(){p++,(p=(parseInt(p,10)<10?"0":"")+p)>60&&(p=0,f++),e.textContent="".concat(f,": ").concat(p)}),1e3)}},{key:"newGameHandler",value:function(){this.pauseHandler();var e=new y;document.body.querySelector(".field").remove(),document.body.querySelector(".header").remove(),e.init(),document.querySelector(".pause-button").removeAttribute("disabled"),f=0,p=0;var t=document.querySelector(".overlay");document.querySelector(".leader-wrap").remove(),t.remove(),this.addTimer()}},{key:"isSolved",value:function(){var e=this,t=document.querySelector(".reload");document.querySelector(".new-game").addEventListener("click",(function(){e.newGameHandler()})),t.addEventListener("click",(function(){e.newGameHandler()}))}},{key:"addTimer",value:function(){var e=document.querySelector(".stop-watch");n=setInterval((function(){p++,(p=(parseInt(p,10)<10?"0":"")+p)>60&&(p=0,f++),e.textContent="".concat(f,": ").concat(p)}),1e3)}},{key:"winHandler",value:function(){var e=JSON.parse(localStorage.getItem("results"))||[];this.pauseHandler();var t=document.querySelector(".field"),o=document.createElement("div"),n=document.querySelector(".move-count"),r=document.createElement("span"),a=document.createElement("span"),i=document.querySelector(".leader-list");a.classList.add("win");var s=document.querySelector(".stop-watch");r.classList.add("win"),r.textContent="Congratulations! You win after ".concat(n.textContent," moves and ").concat(s.textContent),a.textContent="Press reload button to start new game",o.classList.add("overlay"),o.appendChild(r),o.appendChild(a),t.appendChild(o),e.unshift([n.textContent,s.textContent]),localStorage.setItem("results",JSON.stringify(e));var l=document.createElement("div");l.textContent="Moves: ".concat(JSON.parse(localStorage.getItem("results"))[0][0],". Time: ").concat(JSON.parse(localStorage.getItem("results"))[0][1]),i.appendChild(l)}},{key:"automaticSolve",value:function(){}},{key:"init",value:function(){for(;!this.checkSolvability(this.numbers);)this.swapBlocks(0,1);s(u(y.prototype),"getBlocks",this).call(this),this.isSolved()}}])&&i(t.prototype,o),y}(r.Z))).init()},350:(e,t,o)=>{function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}function r(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}o.d(t,{Z:()=>a});const a=function(){function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.fieldOptions=[3,4,5,6,7,8],this.rows=localStorage.getItem("fieldSize")||4,this.columns=localStorage.getItem("fieldSize")||4,this.blockSize=Math.floor(450/this.rows),this.empty={value:16,left:0,top:0},this.blocksCoord=[],this.numbers=(t=Array(this.rows*this.columns).keys(),function(e){if(Array.isArray(e))return n(e)}(t)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?n(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).map((function(e){return e+1})).sort((function(){return Math.random()-.5})),this.counter=0,this.min=0,this.sec=0,this.emptyBlock=0,this.isPause=!1,this.sortedArray=[],this.isVolume=!1,this.suffleIndex=[]}var t,o;return t=e,(o=[{key:"getField",value:function(){var e=this,t=function(e){return'<i class="material-icons">'.concat(e,"</i>")},o=document.createElement("div"),n=document.createElement("header"),r=document.createElement("div"),a=document.createElement("div"),i=document.createElement("span"),s=document.createElement("div"),l=document.createElement("button"),c=document.createElement("select"),u=document.createElement("button"),d=document.createElement("span"),m=document.createElement("div"),f=document.createElement("audio"),p=document.createElement("div"),h=document.createElement("button"),y=document.createElement("button"),v=document.createElement("span"),b=document.createElement("div"),S=document.createElement("div"),g=document.createElement("button");if(g.classList.add("leader-button"),g.textContent="Score",g.addEventListener("click",(function(){b.classList.toggle("hidden")})),b.classList.add("leader-wrap"),b.classList.add("hidden"),S.classList.add("leader-list"),JSON.parse(localStorage.getItem("results")))for(var k=0;k<JSON.parse(localStorage.getItem("results")).length;k++){var C=document.createElement("div");C.textContent="Moves: ".concat(JSON.parse(localStorage.getItem("results"))[k][0],". Time: ").concat(JSON.parse(localStorage.getItem("results"))[k][1]),S.appendChild(C)}return b.appendChild(S),v.classList.add("save-change"),v.textContent='Field size saved. Press "NEW GAME" button.',p.classList.add("reload"),p.innerHTML=t("autorenew"),h.classList.add("save-game"),h.textContent="Save game",y.classList.add("load-game"),y.textContent="Load Game",y.addEventListener("click",(function(){e.loadGame()})),h.addEventListener("click",(function(){h.textContent="Game saved",setTimeout((function(){h.textContent="Save Game"}),1e3),e.saveGameHandler()})),f.setAttribute("id","click-sound"),f.setAttribute("src","./audio/b17af522a99b72f12e392e38f1b08e7e.MP3"),m.classList.add("volume-up"),m.innerHTML=t("volume_off"),m.addEventListener("click",(function(){e.isVolume=!e.isVolume,e.isVolume?(m.innerHTML="",m.innerHTML=t("volume_up")):m.innerHTML=t("volume_off")})),d.classList.add("stop-watch"),d.textContent="0: 00",c.classList.add("choose-size"),c.addEventListener("change",(function(){c.childNodes.forEach((function(e){!0===e.selected&&localStorage.setItem("fieldSize",e.value)})),s.appendChild(v),setTimeout((function(){s.querySelector(".save-change").remove()}),1e3)})),this.fieldOptions.forEach((function(e){var t=document.createElement("option");t.textContent="".concat(e,"x").concat(e),t.value=e,e!=localStorage.getItem("fieldSize")&&4!=e.value||t.setAttribute("selected",!0),c.appendChild(t)})),l.classList.add("new-game"),l.textContent="New Game",r.classList.add("time"),r.appendChild(d),i.textContent=0,i.classList.add("move-count"),a.classList.add("moves"),a.textContent="Moves: ",a.appendChild(i),n.appendChild(a),n.appendChild(r),n.appendChild(u),n.appendChild(m),n.appendChild(p),n.classList.add("header"),o.classList.add("field"),s.classList.add("overlay"),s.appendChild(l),s.appendChild(h),s.appendChild(y),s.appendChild(g),s.appendChild(c),o.appendChild(s),u.textContent="PAUSE",u.classList.add("pause-button"),u.setAttribute("disabled","true"),u.addEventListener("click",(function(){e.isPause=!e.isPause,e.isPause?(u.textContent="RESUME",o.appendChild(s),e.pauseHandler()):(e.resumeTimer(),u.textContent="PAUSE",s.remove())})),document.body.appendChild(f),document.body.appendChild(n),document.body.appendChild(o),document.body.appendChild(b),o}},{key:"getBlocks",value:function(){var e=this,t=this.getField();this.checkSolvability(this.numbers),this.numbers.forEach((function(t){var o=document.createElement("div");o.classList.add("field__item"),o.setAttribute("data-num",t),o.setAttribute("draggable",!0),o.textContent=t+1-1,o.style.width="".concat(e.blockSize,"px"),o.style.height="".concat(e.blockSize,"px"),o.style.backgroundImage='url("./img/327e3224e20da2aa30c94d226bb2556e.jpg")',e.sortedArray.push(o)})),this.sortedArray.forEach((function(o,n){e.suffleIndex.push(o.textContent),e.blocksPosition(o,n),t.appendChild(o)})),this.blocksListenerHandler()}},{key:"shuffle",value:function(e){var t,o,n;for(n=e.length-1;n>0;n--)t=Math.floor(Math.random()*(n+1)),o=e[n],e[n]=e[t],e[t]=o;return e}},{key:"blocksPosition",value:function(e,t){var o=t%this.rows,n=(t-o)/this.rows,r=e.innerHTML%this.rows,a="-".concat(r*this.blockSize,"px"),i=(e.innerHTML-r)/this.rows,s="-".concat(i*this.blockSize,"px");if(e.style.backgroundRepeat="no-repeat",e.style.backgroundPosition=" ".concat(a,"  ").concat(s," "),e.innerHTML%this.rows==0&&0!==e.innerHTML){var l="-".concat(i*this.blockSize-143,"px"),c="-".concat(r*this.blockSize+454,"px");e.style.backgroundPosition=" ".concat(c,"  ").concat(l," ")}this.blocksCoord.push({value:e.innerHTML-1,left:o,top:n,elem:e});var u=this.rows*this.columns;parseInt(e.innerHTML)===u&&(e.ondragstart=function(){return!1},e.addEventListener("dragover",(function(e){e.preventDefault()})),this.emptyBlock=t,e.textContent="",e.style.background="none",this.empty.left="".concat(o*this.blockSize,"px"),this.empty.top="".concat(n*this.blockSize,"px")),e.style.left="".concat(o*this.blockSize,"px"),e.style.top="".concat(n*this.blockSize,"px")}},{key:"init",value:function(){}}])&&r(t.prototype,o),e}()},373:()=>{}},t={};function o(n){if(t[n])return t[n].exports;var r=t[n]={exports:{}};return e[n](r,r.exports,o),r.exports}o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o(350),o(751),o(373)})();
//# sourceMappingURL=script.js.map